Проект предназначен для службы работы антифрода, задача состоит в том, чтобы из потока поступаемых данных в БД автоматически сортировать по разным параметрам и передавать в отдельную таблицу.
-------------------------------------------------------------------------------------------
Описание базы данных.
БД содержит в себе следующие таблицы:
- таблица с данными пользователя
ФИО, адрес, эл.почта
- таблица с банковскими картами пользователя
номер карты, пользователь карты, срок действия карты и банк
- внутренние статусы платежа
информация о платеже от банка если транзакция прошла успешно, ошибка и ее описание если есть
- таблица платежей
включает в себя данные из предыдущих таблиц: карты, пользователь, информация о статусе, сумма, и дата платежа
Выделю отдельно:
-таблица проверок
заполняется триггерами после добавления платежа, включает только айди транзакции и информацию по какому из правил она выведена

Первые три таблицы формируют таблицу платежей, ссылаясь на нее. Так же в таблице уже сразу стоит ограничение на проверку срока действия карты и индексы на поля банк в таблице с картами и ФИО в таблице с пользователем.
Выбраны именно они для того, чтобы при больших объемах хранимых данных упростить и оптимизировать поиск таких данных,
как например "все транзакции пользователя", или общий оборот по определенному банку - например для различного рода отчетностей.

Отдельно указала таблицу проверок - так как она заполняется согласно триггерам для входящих данных, и именно ее автоматическое заполнение является задачей проекта.
Список триггеров и их назначение:
- триггер срабатывающий на количество более 20 платежей за сутки.
- триггер на единовременный платеж более 10 000
- триггер на сумму платежей за сутки более 30000
- более одного ФИО на номер карты

Когда срабатывает определенное условие данные после добавления в основную таблицу автоматически заполняет таблицу проверок, указывая айди платежа и название правила.
Так как подразумевается что несколько сотрудников занимаюся проверкой, вместо select было решено создать процедуру с входящими данными (название правила проверки), которая формирует таблицу всех платежей, что были добавлены по этому правилу. Кроме как проверки сотрудникам она так же может позволить отследить тенденции нарушений и сравнить работу правил.